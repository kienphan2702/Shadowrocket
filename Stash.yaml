proxy-providers: {}
proxies: []
proxy-groups:
  - name: YouTube
    type: select
    proxies:
      - DIRECT
  - name: Wink
    type: select
    proxies:
      - DIRECT
  - name: MeituXiuXiu
    type: select
    proxies:
      - DIRECT
  - name: Spotify
    type: select
    proxies:
      - DIRECT
  - name: SoundCloud
    type: select
    proxies:
      - DIRECT
  - name: Locket
    type: select
    proxies:
      - DIRECT
  - name: LightRoom
    type: select
    proxies:
      - DIRECT
  - name: iTunes
    type: select
    proxies:
      - DIRECT
http:
  mitm:
    - "-redirector*.googlevideo.com"
    - "*.googlevideo.com"
    - "www.youtube.com"
    - "s.youtube.com"
    - "youtubei.googleapis.com"
    - "api-sub.meitu.com"
    - "h5.xiuxiu.meitu.com"
    - "api.xiuxiu.meitu.com"
    - "spclient.wg.spotify.com"
    - "*spclient.spotify.com"
    - "api-mobile.soundcloud.com"
    - "api.revenuecat.com"
    - "raw.githubusercontent.com"
    - "photos.adobe.io"
    - "buy.itunes.apple.com"
  script:
    # YouTube
    - match: ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting|get_watch)
      name: YouTubequguanggao1
      type: response
      require-body: true
      binary-mode: true
      timeout: 10
    # Wink
    - match: ^https?:\/\/api-sub\.meitu\.com\/v2\/user\/vip_info_by_group\.json
      name: Wink1
      type: response
      require-body: true
      timeout: 10
    # Meitu XiuXiu
    - match: ^https?:\/\/(h5|api)\.xiuxiu\.meitu\.com\/v\d\/(h\d\/vip|vip|user)\/
      name: meituxiuxiu1
      type: response
      require-body: true
      timeout: 10
    # Spotify
    - match: ^https:\/\/(spclient\.wg\.spotify\.com|.*-spclient\.spotify\.com(:443)?)\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$
      name: smile_spotify
      type: response
      require-body: true
      binary-mode: true
      timeout: 10
    - match: ^https:\/\/(spclient\.wg\.spotify\.com|.*-spclient\.spotify\.com(:443)?)\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/
      name: smile_spotify_json
      type: request
      timeout: 10
    # SoundCloud
    - match: ^https?:\/\/api-mobile\.soundcloud\.com\/configuration\/ios
      name: SoundCloudGo+1
      type: response
      require-body: true
      timeout: 10
    # RevenueCat
    - match: ^https?:\/\/api\.revenuecat\.com\/.*\/(receipts$|subscribers\/[^/]+$)
      name: revenuecat_response
      type: response
      require-body: true
      binary-mode: false
      timeout: 120
    - match: ^https?:\/\/api\.revenuecat\.com\/.*\/(receipts|subscribers)
      name: revenuecat_request_header
      type: request
      require-body: false
      binary-mode: false
      timeout: 120
    # Lightroom
    - match: ^https:\/\/photos\.adobe\.io\/v2\/accounts*
      name: LightRoom1
      type: response
      require-body: true
      timeout: 10
    # iTunes
    - match: ^https?:\/\/buy\.itunes\.apple\.com\/verifyReceipt$
      name: OldRoll1
      type: response
      require-body: true
      timeout: 10
  rewrite:
    # YouTube rewrite rules
    - '(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) $1$2$3 302'
    - '^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad - reject-200'
    - '^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads - reject-200'
    - '^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking) - reject-200'
    - '^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adcontext - reject-200'
script-providers:
  YouTubequguanggao1:
    url: https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/youtube.response.js
    interval: 86400
  Wink1:
    url: https://raw.githubusercontent.com/yqc007/QuantumultX/master/WinkForeverVipCrack.js
    interval: 86400
  meituxiuxiu1:
    url: https://raw.githubusercontent.com/NightmarketServer/Locket-IPA/refs/heads/main/Meitu_fix.js
    interval: 86400
  smile_spotify:
    url: https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-proto.js
    interval: 86400
  smile_spotify_json:
    url: https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-json.js
    interval: 86400
  SoundCloudGo+1:
    url: https://raw.githubusercontent.com/Marol62926/MarScrpt/main/soundcloud.js
    interval: 86400
  revenuecat_response:
    url: https://raw.githubusercontent.com/kienphan2702/Shadowrocket/main/Javascript/revenuecat.js
    interval: 86400
  revenuecat_request_header:
    url: https://raw.githubusercontent.com/ddgksf2013/Scripts/master/deleteHeader.js
    interval: 86400
  LightRoom1:
    url: https://raw.githubusercontent.com/litieyin/AD_VIP/main/Script/lightroom.js
    interval: 86400
  iTunes1:
    url: https://raw.githubusercontent.com/chxm1023/Rewrite/main/iTunes.js
    interval: 86400
rules:
  - GEOSITE,youtube,YouTube
  - DOMAIN,api-sub.meitu.com,Wink
  - DOMAIN-SUFFIX,xiuxiu.meitu.com,MeituXiuXiu
  - DOMAIN-SUFFIX,spotify.com,Spotify
  - DOMAIN,api-mobile.soundcloud.com,SoundCloud
  - DOMAIN-SUFFIX,api.revenuecat.com,Locket
  - DOMAIN,photos.adobe.io,LightRoom
  - MATCH, DIRECT
dns:
  default-nameserver:
    - 114.114.114.114
    - 1.1.1.1
  skip-cert-verify: true
  nameserver:
    - https://dns.nextdns.io/a72ee5
log-level: info
mode: rule
